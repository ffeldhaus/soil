<div class="page-container register-container">
    <mat-card class="register-card">
      <mat-card-header>
        <mat-card-title>Register as Administrator</mat-card-title>
      </mat-card-header>
      <mat-card-content>
        <p class="info-text">
          To register as an administrator (e.g., teacher, group leader), please fill out the form below.
          This game is intended for educational purposes. Please provide details about your institution.
          If possible, use an email address associated with your institution.
        </p>
        <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>First Name</mat-label>
            <input matInput formControlName="firstName" required>
            <mat-error *ngIf="registerForm.get('firstName')?.hasError('required')">First name is required.</mat-error>
            <mat-error *ngIf="registerForm.get('firstName')?.hasError('maxlength')">First name is too long.</mat-error>
          </mat-form-field>
  
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Last Name</mat-label>
            <input matInput formControlName="lastName" required>
            <mat-error *ngIf="registerForm.get('lastName')?.hasError('required')">Last name is required.</mat-error>
            <mat-error *ngIf="registerForm.get('lastName')?.hasError('maxlength')">Last name is too long.</mat-error>
          </mat-form-field>
  
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Institution</mat-label>
            <input matInput formControlName="institution" required placeholder="e.g., University of Example, Example High School">
            <mat-error *ngIf="registerForm.get('institution')?.hasError('required')">Institution is required.</mat-error>
            <mat-error *ngIf="registerForm.get('institution')?.hasError('minlength')">Institution name is too short (min 3 chars).</mat-error>
            <mat-error *ngIf="registerForm.get('institution')?.hasError('maxlength')">Institution name is too long.</mat-error>
          </mat-form-field>
  
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Email</mat-label>
            <input matInput formControlName="email" type="email" required>
            <mat-error *ngIf="registerForm.get('email')?.hasError('required')">Email is required.</mat-error>
            <mat-error *ngIf="registerForm.get('email')?.hasError('email')">Please enter a valid email.</mat-error>
            <mat-error *ngIf="registerForm.get('email')?.hasError('maxlength')">Email is too long.</mat-error>
          </mat-form-field>
  
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Password</mat-label>
            <input matInput formControlName="password" [type]="showPassword() ? 'text' : 'password'" required>
            <button mat-icon-button matSuffix (click)="togglePasswordVisibility()" type="button" [attr.aria-label]="'Toggle password visibility'" [attr.aria-pressed]="showPassword()">
              <mat-icon>{{showPassword() ? 'visibility_off' : 'visibility'}}</mat-icon>
            </button>
            <mat-error *ngIf="registerForm.get('password')?.hasError('required')">Password is required.</mat-error>
            <mat-error *ngIf="registerForm.get('password')?.hasError('minlength')">Password must be at least 8 characters.</mat-error>
            <mat-error *ngIf="registerForm.get('password')?.hasError('maxlength')">Password is too long.</mat-error>
          </mat-form-field>
  
          <mat-form-field appearance="outline" class="full-width">
            <mat-label>Confirm Password</mat-label>
            <input matInput formControlName="confirmPassword" [type]="showConfirmPassword() ? 'text' : 'password'" required>
             <button mat-icon-button matSuffix (click)="toggleConfirmPasswordVisibility()" type="button" [attr.aria-label]="'Toggle confirm password visibility'" [attr.aria-pressed]="showConfirmPassword()">
              <mat-icon>{{showConfirmPassword() ? 'visibility_off' : 'visibility'}}</mat-icon>
            </button>
            <mat-error *ngIf="registerForm.get('confirmPassword')?.hasError('required')">Confirming password is required.</mat-error>
            <mat-error *ngIf="registerForm.hasError('passwordMismatch') && registerForm.get('confirmPassword')?.touched">
              Passwords do not match.
            </mat-error>
          </mat-form-field>
  
          <button mat-raised-button color="primary" type="submit" class="full-width" [disabled]="isSubmitting()">
            {{ isSubmitting() ? 'Registering...' : 'Register' }}
          </button>
        </form>
        <div class="additional-links">
          <a routerLink="../login">Already registered? Login here</a>
        </div>
      </mat-card-content>
    </mat-card>
  </div>