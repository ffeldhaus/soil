<div class="page-container register-container">
  <mat-card class="register-card">
    <mat-card-header>
      <mat-card-title>{{ "adminRegister.title" | translate }}</mat-card-title>
    </mat-card-header>
    <mat-card-content>
      <p class="info-text">
        {{ "adminRegister.infoText" | translate }}
      </p>
      <form [formGroup]="registerForm" (ngSubmit)="onSubmit()">
        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{
            "adminRegister.firstNameLabel" | translate
          }}</mat-label>
          <input matInput formControlName="firstName" required />
          <mat-error
            *ngIf="registerForm.get('firstName')?.hasError('required')"
            >{{ "adminRegister.firstNameRequired" | translate }}</mat-error
          >
          <mat-error
            *ngIf="registerForm.get('firstName')?.hasError('maxlength')"
            >{{ "adminRegister.firstNameTooLong" | translate }}</mat-error
          >
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ "adminRegister.lastNameLabel" | translate }}</mat-label>
          <input matInput formControlName="lastName" required />
          <mat-error
            *ngIf="registerForm.get('lastName')?.hasError('required')"
            >{{ "adminRegister.lastNameRequired" | translate }}</mat-error
          >
          <mat-error
            *ngIf="registerForm.get('lastName')?.hasError('maxlength')"
            >{{ "adminRegister.lastNameTooLong" | translate }}</mat-error
          >
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{
            "adminRegister.institutionLabel" | translate
          }}</mat-label>
          <input
            matInput
            formControlName="institution"
            required
            placeholder="{{
              'adminRegister.institutionPlaceholder' | translate
            }}"
          />
          <mat-error
            *ngIf="registerForm.get('institution')?.hasError('required')"
            >{{ "adminRegister.institutionRequired" | translate }}</mat-error
          >
          <mat-error
            *ngIf="registerForm.get('institution')?.hasError('minlength')"
            >{{ "adminRegister.institutionTooShort" | translate }}</mat-error
          >
          <mat-error
            *ngIf="registerForm.get('institution')?.hasError('maxlength')"
            >{{ "adminRegister.institutionTooLong" | translate }}</mat-error
          >
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ "adminRegister.emailLabel" | translate }}</mat-label>
          <input matInput formControlName="email" type="email" required />
          <mat-error *ngIf="registerForm.get('email')?.hasError('required')">{{
            "adminRegister.emailRequired" | translate
          }}</mat-error>
          <mat-error *ngIf="registerForm.get('email')?.hasError('email')">{{
            "adminRegister.emailInvalid" | translate
          }}</mat-error>
          <mat-error *ngIf="registerForm.get('email')?.hasError('maxlength')">{{
            "adminRegister.emailTooLong" | translate
          }}</mat-error>
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{ "adminRegister.passwordLabel" | translate }}</mat-label>
          <input
            matInput
            id="password-field"
            formControlName="password"
            [type]="showPassword() ? 'text' : 'password'"
            required
          />
          <button
            mat-icon-button
            matSuffix
            (click)="togglePasswordVisibility()"
            type="button"
            [attr.aria-label]="
              'adminRegister.togglePasswordVisibilityAriaLabel' | translate
            "
            [attr.aria-pressed]="showPassword()"
            data-testid="toggle-password-visibility"
          >
            <mat-icon>{{
              showPassword() ? "visibility_off" : "visibility"
            }}</mat-icon>
          </button>
          <mat-error
            *ngIf="registerForm.get('password')?.hasError('required')"
            >{{ "adminRegister.passwordRequired" | translate }}</mat-error
          >
          <mat-error
            *ngIf="registerForm.get('password')?.hasError('minlength')"
            >{{ "adminRegister.passwordTooShort" | translate }}</mat-error
          >
          <mat-error
            *ngIf="registerForm.get('password')?.hasError('maxlength')"
            >{{ "adminRegister.passwordTooLong" | translate }}</mat-error
          >
        </mat-form-field>

        <mat-form-field appearance="outline" class="full-width">
          <mat-label>{{
            "adminRegister.confirmPasswordLabel" | translate
          }}</mat-label>
          <input
            matInput
            id="confirm-password-field"
            formControlName="confirmPassword"
            [type]="showConfirmPassword() ? 'text' : 'password'"
            required
          />
          <button
            mat-icon-button
            matSuffix
            (click)="toggleConfirmPasswordVisibility()"
            type="button"
            [attr.aria-label]="
              'adminRegister.toggleConfirmPasswordVisibilityAriaLabel'
                | translate
            "
            [attr.aria-pressed]="showConfirmPassword()"
            data-testid="toggle-confirmPassword-visibility"
          >
            <mat-icon>{{
              showConfirmPassword() ? "visibility_off" : "visibility"
            }}</mat-icon>
          </button>
          <mat-error
            *ngIf="
              registerForm.hasError('passwordMismatch') &&
              registerForm.get('confirmPassword')?.touched
            "
          >
            {{ "adminRegister.passwordMismatch" | translate }}
          </mat-error>
        </mat-form-field>

        <button
          mat-raised-button
          color="primary"
          type="submit"
          class="full-width"
          [disabled]="isSubmitting()"
        >
          {{
            isSubmitting()
              ? ("adminRegister.registeringButton" | translate)
              : ("adminRegister.registerButton" | translate)
          }}
        </button>
      </form>
      <div class="additional-links">
        <a routerLink="../login">{{ "adminRegister.loginLink" | translate }}</a>
      </div>
    </mat-card-content>
  </mat-card>
</div>
