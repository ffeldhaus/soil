<div
  class="h-full w-full border bg-gray-800/80 relative cursor-pointer select-none group border-gray-700/50 transition-all duration-200"
  [class.selected-border]="selected"
  role="button"
  [attr.aria-label]="t(getConfig(parcel.crop).label) + ' field'"
  [attr.aria-pressed]="selected"
>
  <!-- Color Overlay -->
  <div
    class="absolute inset-0 z-10 pointer-events-none transition-colors duration-500"
    [style.background-color]="getOverlayColor()"
  ></div>

  <!-- Background Image -->
  @if (parcel.crop) {
    <img
      [src]="'assets/images/' + getConfig(parcel.crop).image"
      [alt]="t('parcel.crop')"
      class="absolute inset-0 w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity"
      onerror="this.style.display = 'none'"
      [attr.draggable]="!isReadOnly"
    />
  }

  <!-- Text Overlay (Top Center) -->
  @if (showLabels) {
    <div class="absolute top-0.5 left-0 right-0 flex justify-center pointer-events-none z-20">
      <div
        class="bg-gray-300/90 text-gray-900 text-[9px] sm:text-xs font-bold px-1 rounded shadow-sm border border-gray-400/50 whitespace-nowrap"
      >
        {{ t(getConfig(parcel.crop).label) }}
      </div>
    </div>
  }

  <!-- Nutrition Overlay (Bottom Right) -->
  @if (showNutrition) {
    <div class="absolute bottom-0.5 right-0.5 pointer-events-none z-30">
      <div
        class="bg-blue-600/90 text-white text-[9px] sm:text-xs font-bold px-1 rounded shadow-sm border border-blue-400/50"
      >
        {{ parcel.nutrition | number: '1.0-0' }}
      </div>
    </div>
  }

  <!-- Harvest Overlay (Center) -->
  @if (showHarvest) {
    <div class="absolute inset-0 flex items-center justify-center pointer-events-none z-30">
      <div
        class="bg-yellow-500/90 text-black text-[9px] sm:text-xs font-bold px-1 rounded shadow-sm border border-yellow-300"
      >
        {{ parcel.yield || 0 | number: '1.0-0' }}
      </div>
    </div>
  }

  <!-- Soil Overlay (Bottom Left) -->
  @if (showSoil) {
    <div class="absolute bottom-0.5 left-0.5 pointer-events-none z-30">
      <div
        class="bg-emerald-700/90 text-white text-[9px] sm:text-xs font-bold px-1 rounded shadow-sm border border-emerald-400/50"
      >
        {{ parcel.soil | number: '1.0-0' }}
      </div>
    </div>
  }
</div>
