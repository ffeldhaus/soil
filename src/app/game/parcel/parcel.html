<div
  class="h-full w-full border bg-gray-800/80 relative cursor-pointer select-none group border-gray-700/50 transition-all duration-200"
  [class.selected-border]="selected"
  role="button"
  [attr.aria-label]="t(getConfig(parcel.crop).label) + ' field'"
  [attr.aria-pressed]="selected"
>
  <!-- Color Overlay -->
  <div
    class="absolute inset-0 z-10 pointer-events-none transition-colors duration-500"
    [style.background-color]="getOverlayColor()"
  ></div>

  <!-- Background Image -->
  @if (parcel.crop) {
    <img
      [src]="'assets/images/' + getConfig(parcel.crop).image"
      [alt]="t('parcel.crop')"
      class="absolute inset-0 w-full h-full object-cover opacity-90 group-hover:opacity-100 transition-opacity"
      onerror="this.style.display = 'none'"
      [attr.draggable]="!isReadOnly"
    />
  }

  <!-- Overlays Container -->
  <div class="absolute inset-0 flex flex-col justify-evenly items-center pointer-events-none z-20 py-0.5">
    <!-- Text Overlay (Name) -->
    @if (showLabels) {
      <div
        class="bg-gray-300/90 text-gray-900 text-[11px] sm:text-sm font-bold px-1.5 rounded shadow-sm border border-gray-400/50 whitespace-nowrap"
      >
        {{ t(getConfig(parcel.crop).label) }}
      </div>
    }

    <!-- Soil Overlay -->
    @if (showSoil) {
      <div
        class="bg-emerald-700/90 text-white text-[11px] sm:text-sm font-bold px-1.5 rounded shadow-sm border border-emerald-400/50"
      >
        {{ parcel.soil | number: '1.0-0' }}
      </div>
    }

    <!-- Harvest Overlay (Yield) -->
    @if (showHarvest) {
      <div
        class="bg-yellow-500/90 text-black text-[11px] sm:text-sm font-bold px-1.5 rounded shadow-sm border border-yellow-300"
      >
        {{ parcel.yield || 0 | number: '1.0-0' }}
      </div>
    }

    <!-- Nutrition Overlay -->
    @if (showNutrition) {
      <div
        class="bg-blue-600/90 text-white text-[11px] sm:text-sm font-bold px-1.5 rounded shadow-sm border border-blue-400/50"
      >
        {{ parcel.nutrition | number: '1.0-0' }}
      </div>
    }
  </div>
</div>
