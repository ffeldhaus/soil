<div class="mb-8 p-4 bg-gray-800/50 rounded-xl border border-gray-700 portrait:rounded-none portrait:border-x-0">
  <h3 class="text-lg font-bold text-white mb-4">{{ t('dashboard.createGame.title') }}</h3>
  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
    <div class="col-span-1 md:col-span-2">
      <div class="flex justify-between items-center mb-1">
        <label class="block text-xs text-gray-200">{{ t('dashboard.createGame.name') }} *</label>
        @if (!newGameConfig.name) {
          <span class="text-[10px] text-red-400 uppercase font-bold">{{ t('dashboard.createGame.required') }}</span>
        }
      </div>
      <input
        [(ngModel)]="newGameConfig.name"
        placeholder="Game Name"
        data-testid="game-name-input"
        [placeholder]="t('dashboard.createGame.phName')"
        class="w-full px-4 py-2 bg-gray-900/50 border rounded-lg text-white focus:outline-none mb-1"
        [class.border-red-500]="!newGameConfig.name"
        [class.border-gray-600]="newGameConfig.name"
        [class.focus:border-emerald-500]="newGameConfig.name"
      />
      <p class="text-[10px] text-gray-500 mb-3 italic">{{ t('dashboard.createGame.nameHint') }}</p>

      <div class="flex justify-between items-center mb-1">
        <label class="block text-xs text-gray-200">{{ t('dashboard.createGame.playerLabel') }} *</label>
        @if (!newGameConfig.playerLabel) {
          <span class="text-[10px] text-red-400 uppercase font-bold">{{ t('dashboard.createGame.required') }}</span>
        }
      </div>
      <input
        [(ngModel)]="newGameConfig.playerLabel"
        placeholder="Player"
        [placeholder]="t('dashboard.createGame.phPlayer')"
        class="w-full px-4 py-2 bg-gray-900/50 border rounded-lg text-white focus:outline-none mb-1"
        [class.border-red-500]="!newGameConfig.playerLabel"
        [class.border-gray-600]="newGameConfig.playerLabel"
        [class.focus:border-emerald-500]="newGameConfig.playerLabel"
      />
      <p class="text-[10px] text-gray-500 mb-3 italic">{{ t('dashboard.createGame.playerHint') }}</p>
    </div>
    <div>
      <div class="flex justify-between items-center mb-1">
        <label class="block text-xs text-gray-200">{{ t('dashboard.createGame.players') }}</label>
        <span class="text-xs font-bold text-emerald-400 font-mono">{{ newGameConfig.numPlayers }}</span>
      </div>
      <input
        [(ngModel)]="newGameConfig.numPlayers"
        (ngModelChange)="onPlayersChange()"
        type="range"
        min="1"
        max="50"
        class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-emerald-500"
      />
    </div>
    <div>
      <div class="flex justify-between items-center mb-1">
        <label class="block text-xs text-gray-200">{{ t('dashboard.createGame.rounds') }}</label>
        <span class="text-xs font-bold text-emerald-400 font-mono">{{ newGameConfig.numRounds }}</span>
      </div>
      <input
        [(ngModel)]="newGameConfig.numRounds"
        type="range"
        min="10"
        max="50"
        class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-emerald-500"
      />
    </div>
    <div>
      <div class="flex justify-between items-center mb-1">
        <label class="block text-xs text-gray-200">{{ t('dashboard.createGame.bots') }}</label>
        <span class="text-xs font-bold text-blue-400 font-mono">{{ newGameConfig.numAi }}</span>
      </div>
      <input
        [(ngModel)]="newGameConfig.numAi"
        type="range"
        min="0"
        [max]="newGameConfig.numPlayers"
        class="w-full h-2 bg-gray-700 rounded-lg appearance-none cursor-pointer accent-blue-500"
      />
    </div>
  </div>

  <div class="grid grid-cols-1 md:grid-cols-2 gap-4 mb-4">
    <div>
      <label class="block text-xs text-gray-200 mb-1">{{ t('dashboard.createGame.aiLevel') }}</label>
      <select
        [(ngModel)]="newGameConfig.aiLevel"
        class="w-full px-4 py-2 bg-gray-900/50 border border-gray-600 rounded-lg text-white font-bold focus:border-blue-500 focus:outline-none"
      >
        <option value="elementary">{{ t('ai.level.elementary') }}</option>
        <option value="middle">{{ t('ai.level.middle') }}</option>
        <option value="high">{{ t('ai.level.high') }}</option>
      </select>
    </div>
  </div>

  <div class="space-y-3 mb-6 p-3 bg-gray-900/30 rounded-lg border border-gray-700/50">
    <div class="flex items-center gap-3">
      <input
        type="checkbox"
        id="subsidiesEnabled"
        [(ngModel)]="newGameConfig.subsidiesEnabled"
        class="w-5 h-5 rounded border-gray-600 bg-gray-900 text-emerald-500 focus:ring-emerald-500 focus:ring-offset-gray-900"
      />
      <label for="subsidiesEnabled" class="text-sm text-gray-200 cursor-pointer">
        {{ t('dashboard.createGame.subsidies') }}
      </label>
    </div>
    <div class="flex items-center gap-3">
      <input
        type="checkbox"
        id="advancedPricingEnabled"
        [(ngModel)]="newGameConfig.advancedPricingEnabled"
        class="w-5 h-5 rounded border-gray-600 bg-gray-900 text-emerald-500 focus:ring-emerald-500 focus:ring-offset-gray-900"
      />
      <label for="advancedPricingEnabled" class="text-sm text-gray-200 cursor-pointer">
        {{ t('dashboard.createGame.advancedPricing') }}
      </label>
    </div>
  </div>

  <button
    (click)="onSubmit()"
    [disabled]="isCreatingGame || !newGameConfig.name || !newGameConfig.playerLabel"
    data-testid="create-game-submit"
    class="w-full py-3 bg-emerald-600 hover:bg-emerald-500 disabled:bg-gray-600 disabled:cursor-not-allowed text-white font-bold rounded-lg transition shadow-lg flex items-center justify-center gap-2"
  >
    @if (!isCreatingGame) {
      <span>{{ t('dashboard.createGame.submit') }}</span>
    }
    @if (isCreatingGame) {
      <span class="flex items-center gap-2">
        <svg class="animate-spin h-5 w-5 text-white" xmlns="http://www.w3.org/2000/svg" fill="none" viewBox="0 0 24 24">
          <circle class="opacity-25" cx="12" cy="12" r="10" stroke="currentColor" stroke-width="4"></circle>
          <path
            class="opacity-75"
            fill="currentColor"
            d="M4 12a8 8 0 018-8V0C5.373 0 0 5.373 0 12h4zm2 5.291A7.962 7.962 0 014 12H0c0 3.042 1.135 5.824 3 7.938l3-2.647z"
          ></path>
        </svg>
        <span>{{ t('dashboard.createGame.creating') }}</span>
      </span>
    }
  </button>
</div>
