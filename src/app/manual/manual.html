<div
  class="min-h-screen bg-gray-900 text-white font-sans relative flex flex-col overflow-x-hidden"
  [ngClass]="{
    'print-a4': printSize === 'A4',
    'print-letter': printSize === 'Letter',
    'print-portrait': printOrientation === 'portrait',
    'print-landscape': printOrientation === 'landscape',
  }"
>
  <!-- Background Image -->
  <div class="fixed inset-0 z-0 opacity-40 pointer-events-none portrait:hidden">
    <img src="assets/images/bauernhof.jpg" class="w-full h-full object-cover" />
  </div>

  <!-- Navigation Bar -->
  <nav
    class="bg-gray-900/95 border-b border-gray-700 backdrop-blur shadow-lg px-6 py-3 sticky top-0 z-50 flex items-center justify-between shrink-0 h-16 print:hidden"
  >
    <div class="flex items-center gap-4">
      <h1 class="text-2xl font-bold font-serif text-emerald-500 tracking-wider">SOIL MANUAL</h1>
    </div>

    <div class="flex items-center gap-3">
      <button
        (click)="showPrintModal = true"
        class="px-4 py-1.5 bg-emerald-600 hover:bg-emerald-500 text-white font-bold rounded-lg border border-emerald-500 transition text-xs flex items-center gap-2"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-4 w-4" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M17 17h2a2 2 0 002-2v-4a2 2 0 00-2-2H5a2 2 0 00-2 2v4a2 2 0 002 2h2m2 4h10a2 2 0 002-2v-4a2 2 0 00-2-2H9a2 2 0 00-2 2v4a2 2 0 002 2zm8-12V5a2 2 0 00-2-2H9a2 2 0 00-2 2v4h10z"
          />
        </svg>
        {{ t('manual.print') }}
      </button>

      <app-language-switcher></app-language-switcher>

      <button
        (click)="logout()"
        class="p-2 hover:bg-red-900/30 rounded-lg text-red-400 hover:text-red-300 transition"
        [title]="t('board.logout')"
      >
        <svg xmlns="http://www.w3.org/2000/svg" class="h-5 w-5" fill="none" viewBox="0 0 24 24" stroke="currentColor">
          <path
            stroke-linecap="round"
            stroke-linejoin="round"
            stroke-width="2"
            d="M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1"
          />
        </svg>
      </button>
    </div>
  </nav>

  <div class="relative z-10 max-w-5xl mx-auto px-4 sm:px-6 py-12 portrait:px-0 portrait:max-w-none">
    <header
      class="text-center mb-16 bg-gray-900/80 backdrop-blur-md p-8 sm:p-12 rounded-3xl border border-gray-700 shadow-2xl portrait:rounded-none portrait:border-x-0"
    >
      <h1 class="text-4xl sm:text-6xl font-black text-white mb-4 tracking-tight">
        {{ t('manual.title') }}
      </h1>
      <p class="text-xl text-gray-400 max-w-2xl mx-auto">{{ t('manual.subtitle') }}</p>
    </header>

    <!-- General Section -->
    <section
      class="mb-20 bg-gray-900/80 backdrop-blur-md p-8 sm:p-12 rounded-3xl border border-gray-700 shadow-2xl print:bg-white print:border-gray-200 print:shadow-none print:m-0 print:mb-8 portrait:rounded-none portrait:border-x-0"
    >
      <h2 class="text-3xl font-bold text-emerald-400 mb-8 flex items-center gap-3 print:text-emerald-700">
        <span class="bg-emerald-900/50 p-2 rounded-xl text-2xl print:bg-emerald-100">ðŸ“–</span>
        {{ t('manual.intro.title') }}
      </h2>
      <div class="grid md:grid-cols-2 gap-12 text-gray-300 leading-relaxed print:text-gray-700">
        <div>
          <h3 class="text-xl font-bold text-white mb-4 print:text-black">{{ t('manual.intro.goal.title') }}</h3>
          <p>{{ t('manual.intro.goal.text') }}</p>
        </div>
        <div>
          <h3 class="text-xl font-bold text-white mb-4 print:text-black">
            {{ t('manual.intro.mechanics.title') }}
          </h3>
          <p>{{ t('manual.intro.mechanics.text') }}</p>
        </div>
      </div>
    </section>

    <!-- Concepts Section -->
    <section
      class="mb-20 bg-gray-900/80 backdrop-blur-md p-8 sm:p-12 rounded-3xl border border-gray-700 shadow-2xl print-page-break-after print:bg-white print:border-gray-200 print:shadow-none print:m-0 print:mb-8 portrait:rounded-none portrait:border-x-0"
    >
      <h2 class="text-3xl font-bold text-emerald-400 mb-8 flex items-center gap-3 print:text-emerald-700">
        <span class="bg-emerald-900/50 p-2 rounded-xl text-2xl print:bg-emerald-100">ðŸ’¡</span>
        {{ t('manual.concepts.title') }}
      </h2>
      <div class="grid md:grid-cols-2 lg:grid-cols-3 gap-8 portrait:gap-0 portrait:divide-y portrait:divide-gray-800">
        <app-manual-concept-card
          *ngFor="
            let concept of ['units', 'pest', 'rotation', 'requirements', 'weather', 'yield', 'price'];
            let i = index
          "
          [concept]="concept"
          [index]="i"
        ></app-manual-concept-card>
      </div>
    </section>

    <!-- Crops Section -->
    <div class="space-y-12 portrait:space-y-0 portrait:divide-y portrait:divide-gray-800">
      <app-manual-crop-card *ngFor="let crop of crops" [crop]="crop"></app-manual-crop-card>
    </div>

    <footer class="mt-24 pt-12 border-t border-gray-800 text-center text-gray-500 text-sm italic print:mt-8">
      {{ t('manual.footer') }}
    </footer>
  </div>

  <!-- Print Settings Modal -->
  @if (showPrintModal) {
    <app-manual-print-modal
      [printSize]="printSize"
      [printOrientation]="printOrientation"
      (cancelPrint)="showPrintModal = false"
      (print)="print()"
      (sizeChange)="printSize = $event"
      (orientationChange)="printOrientation = $event"
    ></app-manual-print-modal>
  }
</div>
